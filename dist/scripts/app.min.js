var app;!function(e){"use strict";function t(e,t){angular.module(e,t)}function o(e,t,o){angular.module(e).controller(t,o)}function r(e,t,o){angular.module(e).provider(t,o)}function n(e,t,o){angular.module(e).service(t,o)}function i(e,t,o){angular.module(e).factory(t,o)}function p(e,t){angular.module(e).config(t)}function a(e,t,o){angular.module(e).directive(t,o)}e.addModule=t,e.addController=o,e.addProvider=r,e.addService=n,e.addFactory=i,e.addConfig=p,e.addDirective=a,angular.module("app",["ngAria","ngMessages","ngMaterial","app.repo"])}(app||(app={}));var app;!function(e){var t;!function(){"use strict";e.addModule("app.repo",["app.common.storage","app.common.github","ui.router"])}(t=e.repo||(e.repo={}))}(app||(app={}));var app;!function(e){var t;!function(t){var o;!function(){"use strict";e.addModule("app.common.github",[])}(o=t.github||(t.github={}))}(t=e.common||(e.common={}))}(app||(app={}));var app;!function(e){var t;!function(t){var o;!function(){"use strict";e.addModule("app.common.storage",[])}(o=t.storage||(t.storage={}))}(t=e.common||(e.common={}))}(app||(app={}));var app;!function(e){var t;!function(t){"use strict";var o=function(){function e(e,t){this.$state=e,this.StorageService=t,this.config={token:this.StorageService.getItem("githubToken"),repos:this.StorageService.getItem("githubRepos")},this.rows=this.config.repos.length}return e.prototype.getRows=function(e){return new Array(e)},e.prototype.addRow=function(){this.rows++},e.prototype.removeRow=function(){this.rows<1||(this.rows--,delete this.config.repos[this.rows])},e.prototype.showError=function(e,t){return e[t].$dirty&&e[t].$invalid||e.$submitted},e.prototype.submit=function(e){var t=[];this.StorageService.setItem("githubToken",e.token),angular.forEach(e.repos,function(e){t.push({owner:e.owner,name:e.name})}),this.StorageService.setItem("githubRepos",t),this.$state.go("repo")},e.prototype.cancel=function(){this.$state.go("repo")},e}();t.RepoConfigController=o,e.addController("app.repo","RepoConfigController",o)}(t=e.repo||(e.repo={}))}(app||(app={}));var app;!function(e){var t;!function(t){"use strict";var o=function(){function e(e,t){this.GithubService=e,this.StorageService=t,this.repos={},this.reposToList=[],this.reposToList=t.getItem("githubRepos")||[],this.loadRepos()}return e.prototype.loadRepos=function(){var e=this;this.reposToList.forEach(function(t){e.GithubService.getRepo(t.owner,t.name).then(function(o){e.repos[t.name]=o})})},e}();t.RepoController=o,e.addController("app.repo","RepoController",o)}(t=e.repo||(e.repo={}))}(app||(app={}));var app;!function(e){var t;!function(t){"use strict";var o=function(){function e(e,t){this.$scope=e,this.GithubService=t,this.repo=e.repo,this.loadRepoForks(),this.loadRepoIssues()}return e.prototype.loadRepoForks=function(){var e=this;this.GithubService.getRepoForks(this.repo.owner.login,this.repo.name).then(function(t){e.repo.forks=t})},e.prototype.loadRepoIssues=function(){var e=this;this.GithubService.getRepoIssues(this.repo.owner.login,this.repo.name).then(function(t){e.repo.issues=t.filter(function(e){return"undefined"==typeof e.pull_request}),e.repo.prs=t.filter(function(e){return"undefined"!=typeof e.pull_request})})},e}();t.RepoDirectiveController=o,e.addController("app.repo","RepoDirectiveController",o)}(t=e.repo||(e.repo={}))}(app||(app={}));var app;!function(e){var t;!function(t){function o(){return{restrict:"EA",scope:{repo:"="},controller:"RepoDirectiveController as vm",templateUrl:"/src/scripts/repo/repo.directive.html"}}t.RepoOverviewDirective=o,e.addDirective("app.repo","repoOverview",o)}(t=e.repo||(e.repo={}))}(app||(app={}));var app;!function(e){var t;!function(){"use strict";function t(e,t){e.state("repo",{url:"/repos",controller:"RepoController as vm",templateUrl:"/src/scripts/repo/repo.html"}).state("repo.view",{url:"/:repoOwner/:repoName",views:{"@":{controller:"RepoViewController as vm",templateUrl:"/src/scripts/repo/repo.view.html",resolve:{repo:["$stateParams","GithubService",function(e,t){return t.getRepo(e.repoOwner,e.repoName)}]}}}}).state("repo.config",{url:"/config",views:{"@":{controller:"RepoConfigController as vm",templateUrl:"/src/scripts/repo/repo.config.html"}}}),t.otherwise("/repos")}e.addConfig("app.repo",t)}(t=e.repo||(e.repo={}))}(app||(app={}));var app;!function(e){var t;!function(t){"use strict";var o=function(){function e(){}return e}();t.RepoService=o,e.addService("app.repo","RepoService",o)}(t=e.repo||(e.repo={}))}(app||(app={}));var app;!function(e){var t;!function(t){"use strict";var o=function(){function e(e){this.repo=e}return e}();t.RepoViewController=o,e.addController("app.repo","RepoViewController",o)}(t=e.repo||(e.repo={}))}(app||(app={}));var app;!function(e){var t;!function(t){var o;!function(t){"use strict";var o=function(){function e(e,t,o){this.$http=e,this.$log=t,this.StorageService=o,this.basePath="https://api.github.com",this.token=this.StorageService.getItem("githubToken")}return e.prototype.checkToken=function(e){return this.request("GET","/user",{headers:{Authorization:"token "+e}}).then(function(e){return e.data})},e.prototype.getRepo=function(e,t){return this.request("GET","/repos/"+e+"/"+t).then(function(e){return e.data})},e.prototype.getRepoIssues=function(e,t,o){return void 0===o&&(o={}),this.request("GET","/repos/"+e+"/"+t+"/issues",{params:o}).then(function(e){return e.data})},e.prototype.getRepoForks=function(e,t,o){return void 0===o&&(o={}),this.request("GET","/repos/"+e+"/"+t+"/forks",{params:o}).then(function(e){return e.data})},e.prototype.request=function(e,t,o){void 0===o&&(o={}),this.token||this.$log.warn("Github Auth Token not set.");var r=angular.extend({},{cache:!0,method:e,url:this.basePath+t,headers:{Accept:"application/vnd.github.v3.raw+json","Content-Type":"application/json;charset=UTF-8",Authorization:"token "+this.token}},o);return this.$http(r)},e}();t.GithubService=o,e.addService("app.common.github","GithubService",o)}(o=t.github||(t.github={}))}(t=e.common||(e.common={}))}(app||(app={}));var app;!function(e){var t;!function(t){var o;!function(t){"use strict";function o(e){function t(t,o,r,n){n.$parsers.push(function(t){return e.checkToken(t).then(function(){n.$setValidity("validGithubToken",!0)})["catch"](function(){n.$setValidity("validGithubToken",!1)}),t})}return{restrict:"A",require:"ngModel",link:t}}t.GithubTokenValidateDirective=o,e.addDirective("app.common.github","requireValidGithubToken",o)}(o=t.github||(t.github={}))}(t=e.common||(e.common={}))}(app||(app={}));var app;!function(e){var t;!function(t){var o;!function(t){"use strict";var o=function(){function e(){}return e.prototype.setItem=function(e,t){var o={data:t};localStorage.setItem(e,JSON.stringify(o))},e.prototype.getItem=function(e){var t=JSON.parse(localStorage.getItem(e));return t&&t.data?t.data:void 0},e.prototype.removeItem=function(e){localStorage.removeItem(e)},e}();t.StorageService=o,e.addService("app.common.storage","StorageService",o)}(o=t.storage||(t.storage={}))}(t=e.common||(e.common={}))}(app||(app={}));